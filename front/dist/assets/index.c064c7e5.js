var k=Object.defineProperty,O=Object.defineProperties;var M=Object.getOwnPropertyDescriptors;var b=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable;var x=(t,e,s)=>e in t?k(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,d=(t,e)=>{for(var s in e||(e={}))P.call(e,s)&&x(t,s,e[s]);if(b)for(var s of b(e))D.call(e,s)&&x(t,s,e[s]);return t},u=(t,e)=>O(t,M(e));import{i as V,g as F,s as U,a as W,c as N,b as z,r as m,u as v,d as B,j as h,e as a,A as R,f as J,h as K,R as Y,k as _,P as H}from"./vendor.09e6414e.js";const T=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function s(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerpolicy&&(o.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?o.credentials="include":r.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=s(r);fetch(r.href,o)}};T();const X={apiKey:"AIzaSyBwKtHEiasYYbX2OU_SH9_9hNGEXPJMsPA",authDomain:"coaching-fa243.firebaseapp.com",projectId:"coaching-fa243",storageBucket:"coaching-fa243.appspot.com",messagingSenderId:"551107038028",appId:"1:551107038028:web:3779b8ad86c81917611de9"},$=V(X),w=F($),G=async(t,e)=>{try{const s=await U(w,t,e);return localStorage.setItem("user",JSON.stringify(s.user)),s.user}catch{throw console.log("Wrong credentials"),{message:"Wrong credentials"}}},Q=()=>{W(w).then(()=>{console.log("logged out"),localStorage.removeItem("user")}).catch(t=>{})},S={loginUser:G,logoutUser:Q},E=JSON.parse(localStorage.getItem("user")),Z=E?{user:E,authenticated:!0}:{user:void 0,authenticated:!1},g=N("login",async(t,e)=>{try{const s=await S.loginUser(t.email,t.password);return u(d({},t),{user:s})}catch(s){return console.log(s.message),alert(s.message),e.rejectWithValue({error:s.message})}}),j=N("logout",async(t,e)=>{try{S.logoutUser()}catch(s){return e.rejectWithValue({error:s.message})}}),q=z({name:"auth",initialState:Z,reducers:{},extraReducers:t=>{t.addCase(g.fulfilled,(e,s)=>{e.user=s.payload.user,e.authenticated=!0}),t.addCase(g.rejected,e=>{e.authenticated=!1}),t.addCase(j.fulfilled,e=>{e.authenticated=!1})}}),{reducer:ee}=q,te=()=>{const[t,e]=m.exports.useState({email:"",password:""}),[s,i]=m.exports.useState(!0),[r,o]=m.exports.useState(!1),[c,A]=m.exports.useState(!0),{authenticated:C}=v(l=>l.auth),{user:n}=v(l=>l.auth),f=B(),p=()=>{const l=/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/.test(t.email);return i(l),y(),l},y=()=>{A(t.password===""||!s)},I=()=>{const l=p();console.log(t),l?f(g(t)):alert("mail")},L=()=>{e({email:"",password:""}),f(j())};return C?h("div",{className:"justify-center items-center flex mt-8 flex-col",children:[a("label",{className:"my-2",children:(n==null?void 0:n.displayName)?n==null?void 0:n.displayName:"No Name Yet"}),a("label",{className:"my-2",children:n==null?void 0:n.email}),a("button",{className:"bg-primary py-2 my-2 px-8 text-sm text-white rounded border border-primary focus:outline-none",onClick:()=>{L()},children:"Logout"})]}):a("div",{className:"h-screen w-full flex justify-center items-center",children:h("div",{className:"w-full max-w-lg m-auto rounded-lg border border-solid shadow-default py-10 px-16",children:[a("h1",{className:"text-2xl font-medium text-primary mt-4 mb-8 text-center",children:"Log in to your account"}),a("div",{className:"max-w-md px-4 mx-auto ",children:h("div",{children:[a("label",{htmlFor:"email",className:"block py-1 text-gray-500",children:"Email"}),a("div",{className:"flex items-center p-2 border rounded-md",onMouseEnter:()=>i(!0),onMouseLeave:()=>p(),children:a("input",{value:t.email,onChange:l=>{e(u(d({},t),{email:l.target.value})),i(!0)},type:"email",placeholder:"name@email.com",id:"email",className:"w-full p-1 text-gray-500 outline-none bg-transparent"})}),!s&&a("label",{className:"text-red",children:"Invalid email adress*"}),a("label",{htmlFor:"password",className:"block pb-1 pt-6",children:"Password"}),h("div",{className:"flex items-center text-gray-400 border rounded-md",onMouseEnter:()=>p(),onMouseLeave:()=>y(),children:[a("input",{value:t.password,onChange:l=>e(u(d({},t),{password:l.target.value})),type:r?"text":"password",placeholder:"Enter password",id:"password",className:"w-full p-2.5  bg-transparent outline-none"}),a("button",{className:"pr-2",onClick:()=>{o(!r)},children:r?a(R,{color:"#0AC5CD",size:24}):a(J,{color:"#0AC5CD",size:24})})]}),a("div",{className:"flex justify-center items-center mt-6",children:a("button",{onClick:I,disabled:c,className:"bg-blue py-2 px-8 text-sm text-white rounded border border-blue-light focus:outline-none",children:"Login"})})]})}),a("div",{className:"flex items-center mt-8 justify-center",children:a("button",{className:"justify-center text-blue-500 hover:underline",children:"Need to register? Sign up for free"})})]})})},se=()=>a(te,{});const ae={auth:ee},re=K({reducer:ae,devTools:!0});Y.render(a(_.StrictMode,{children:a(H,{store:re,children:a(se,{})})}),document.getElementById("root"));
